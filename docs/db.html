---

title: Title


keywords: fastai
sidebar: home_sidebar



nb_path: "nbs/db.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/db.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="BoltConnectionUnsuccessful" class="doc_header"><code>class</code> <code>BoltConnectionUnsuccessful</code><a href="https://github.com/talosiot-will/mranderson/tree/master/mranderson/db.py#L31" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>BoltConnectionUnsuccessful</code>() :: <code>Exception</code></p>
</blockquote>
<p>Common base class for all non-exit exceptions.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="MultipleSearchResults" class="doc_header"><code>class</code> <code>MultipleSearchResults</code><a href="https://github.com/talosiot-will/mranderson/tree/master/mranderson/db.py#L33" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>MultipleSearchResults</code>() :: <code>Exception</code></p>
</blockquote>
<p>Common base class for all non-exit exceptions.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="NoSearchResults" class="doc_header"><code>class</code> <code>NoSearchResults</code><a href="https://github.com/talosiot-will/mranderson/tree/master/mranderson/db.py#L35" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>NoSearchResults</code>() :: <code>Exception</code></p>
</blockquote>
<p>Common base class for all non-exit exceptions.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Driver-Management">Driver Management<a class="anchor-link" href="#Driver-Management"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="make_driver" class="doc_header"><code>make_driver</code><a href="https://github.com/talosiot-will/mranderson/tree/master/mranderson/db.py#L39" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>make_driver</code>(<strong><code>uri</code></strong>=<em><code>'bolt://localhost:7687'</code></em>, <strong><code>auth</code></strong>=<em><code>'neo4j/talosadmin'</code></em>, <strong><code>container</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Create a driver for neo4j database.
uri: str
    The uri to the bolt port of the database
auth: str
    auth string in the form of user/password
container: docker container object
    If provider, the uri will be figured out automatically by examining the container.
    uri will be ignored if container is provided</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="set_default_driver" class="doc_header"><code>set_default_driver</code><a href="https://github.com/talosiot-will/mranderson/tree/master/mranderson/db.py#L58" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>set_default_driver</code>(<strong><code>driver</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="default_driver" class="doc_header"><code>default_driver</code><a href="https://github.com/talosiot-will/mranderson/tree/master/mranderson/db.py#L62" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>default_driver</code>(<strong><code>uri</code></strong>=<em><code>'bolt://localhost:7687'</code></em>, <strong><code>auth</code></strong>=<em><code>'neo4j/talosadmin'</code></em>, <strong><code>force_remake</code></strong>=<em><code>False</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="tearDown" class="doc_header"><code>tearDown</code><a href="https://github.com/talosiot-will/mranderson/tree/master/mranderson/db.py#L74" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>tearDown</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Query">Query<a class="anchor-link" href="#Query"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Query" class="doc_header"><code>class</code> <code>Query</code><a href="https://github.com/talosiot-will/mranderson/tree/master/mranderson/db.py#L82" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Query</code>(<strong><code>driver</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Generate-snippets-of-cypher-text">Generate snippets of cypher text<a class="anchor-link" href="#Generate-snippets-of-cypher-text"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="node" class="doc_header"><code>node</code><a href="https://github.com/talosiot-will/mranderson/tree/master/mranderson/db.py#L154" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>node</code>(<strong><code>label</code></strong>=<em><code>None</code></em>, <strong><code>variable</code></strong>=<em><code>None</code></em>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="relationship" class="doc_header"><code>relationship</code><a href="https://github.com/talosiot-will/mranderson/tree/master/mranderson/db.py#L178" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>relationship</code>(<strong><code>rel_type</code></strong>, <strong><code>name</code></strong>=<em><code>None</code></em>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="MATCH" class="doc_header"><code>MATCH</code><a href="https://github.com/talosiot-will/mranderson/tree/master/mranderson/db.py#L194" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>MATCH</code>(<strong><code>label</code></strong>, <strong><code>variable</code></strong>=<em><code>None</code></em>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="RETURN" class="doc_header"><code>RETURN</code><a href="https://github.com/talosiot-will/mranderson/tree/master/mranderson/db.py#L197" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>RETURN</code>(<strong>*<code>args</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="WITH" class="doc_header"><code>WITH</code><a href="https://github.com/talosiot-will/mranderson/tree/master/mranderson/db.py#L200" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>WITH</code>(<strong>*<code>args</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="node_to_dict" class="doc_header"><code>node_to_dict</code><a href="https://github.com/talosiot-will/mranderson/tree/master/mranderson/db.py#L207" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>node_to_dict</code>(<strong><code>resp</code></strong>:<code>dict</code>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="fetch" class="doc_header"><code>fetch</code><a href="https://github.com/talosiot-will/mranderson/tree/master/mranderson/db.py#L210" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>fetch</code>(<strong><code>label</code></strong>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>
<p>Quickly find a single node by label and properties and return it as a dictionary</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="set_properties" class="doc_header"><code>set_properties</code><a href="https://github.com/talosiot-will/mranderson/tree/master/mranderson/db.py#L220" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>set_properties</code>(<strong><code>label</code></strong>:<code>str</code>, <strong><code>search_properties</code></strong>:<code>dict</code>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>
<p>Find a node of and set properties to it
label: string of the node Label
search_properties: dict of properties the existing node must have.  e.g. eid="abc123"
additional kwargs will be applied to the node</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Common-actions">Common actions<a class="anchor-link" href="#Common-actions"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="unlink" class="doc_header"><code>unlink</code><a href="https://github.com/talosiot-will/mranderson/tree/master/mranderson/db.py#L239" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>unlink</code>(<strong><code>source</code></strong>:<code>str</code>, <strong><code>target</code></strong>:<code>str</code>, <strong><code>relationship</code></strong>:<code>str</code>)</p>
</blockquote>
<p>Delete the relationship between the source and target nodes
(source)-[:RELATIONSHIP]-&gt;(target)
source: str
    Cypher string of source node
target: str
    Cypher string of target node
relationship: str
    Type of relationship to delete</p>
<p>Returns a query response</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_properties_of" class="doc_header"><code>get_properties_of</code><a href="https://github.com/talosiot-will/mranderson/tree/master/mranderson/db.py#L258" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_properties_of</code>(<strong><code>label</code></strong>, <strong><code>properties</code></strong>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>
<p>label: str
    The label of the node youre looking for.  e.g. Equipment
properties: iterable
    A list or tuple of the strings of property names
Any additional kwargs will go to searching for the node.  e.g. {"eid": "device_eid"}
Returns list of the properties of the node.  Node must be unique.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="link" class="doc_header"><code>link</code><a href="https://github.com/talosiot-will/mranderson/tree/master/mranderson/db.py#L278" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>link</code>(<strong><code>node1</code></strong>, <strong><code>node1name</code></strong>, <strong><code>node2</code></strong>, <strong><code>node2name</code></strong>, <strong><code>rel_type</code></strong>, <strong>**<code>rel_kwargs</code></strong>)</p>
</blockquote>
<p>Create relationship (node1)-[:rel_type]-&gt;(node2)
node1: str describing a cypher node
node1name: the variable name used in node1
rel_type: the type of relationship we are creating from node1 to node2
rel_kwargs: the properties you want the relationship to have, if any</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

</div>
 

